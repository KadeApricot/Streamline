
---

## 1. Overview

- **Genre:** Hybrid Tower Defense + Factory Automation
- **Inspiration:** PvZ2 Eclise, Oritech, Balatro
- **Target Platform:** Windows (PC)
- **Visual Style:** “Techy” Sci-Fi. Clean, functional aesthetics.
- **Technical Constraints:**
	- **Rendering:** CPU-based (Software rendering).
	- **Performance:** Optimized for low memory and low processing power.
	- **Art Direction:** Minimalist vector art or pixel art; avoid complex shaders/particles. Use color coding and distinct geometric shapes for clarity.

## 3. Core

- Chain reaction
- Actively triggered mechanism
- Automation to reduce memory load
- Customizability and Choices of Automation types and Defense
- Limited amount of [[Processing Systems]])
- Problem Solving and Adaptation to challenging levels

### 2. Gameplay Loop & Progression

The gameplay operates on a [Grid](Grid.md)

The game operates on a **Level-Based System** with a linear progression and optional side-quests for extra rewards.

For reference, please read [Automation Systems](Automation%20Systems) first

#### Phase 1: Industrialization (The Setup)

- **State:**
	- Peaceful. No enemies spawn.
	- The resource supply chain isn’t operating just yet.
- **Goal:** Establish a resource supply chain.
- **Actions:**
	- Place [**Mines**](Mines.md).
	- Place [**Extractors**](Extractors) to extract resources.
	- Build [**Pipes**](Item%20Pipes.md) to transport resources to the [**Hall**](Hall.md).
	- The phase ends when the player manually initiates Phase 2.

#### Phase 2: The Cycle (The Conflict)

Once initiated, the game spawns enemies based on a preset event file that operates on two type of phases until the the end of the event file is reached or until the player lost.

##### Mode A: Charge (Downtime)

- **Pacing:** Slow, tactical.
- **Enemy State:** No active attacks.
- **Player Activity:**
	- Accumulate resources generated by the factory.
	- Repair damaged structures.
	- Expand the belt network.
	- **Craft/Purchase Towers** using the Hall’s inventory.

##### Mode B: Haste (Combat)

- **Pacing:** Fast, dramatic, high-tension.
- **Enemy State:** Organized waves spawn from map edges targeting the Hall.
- **Player Activity:**
	- Activate **Usables** (manual skills).
	- Monitor defense integrity.
	- Adjacent to Charge’s activities

### 4. Tower Systems

Towers are the primary defense. They are unique because they interact physically with the automation grid.

#### Acquisition & Placement

1. **Fabrication:** Towers are “bought” using materials stored in the Hall.
2. **Placeent:** Towers can be placed on the ground.
3. **Cooldown:** There is a global cooldown on buying towers to prevent spamming.
4. **Belt Interaction:** Towers can be placed **directly onto Belts**.

#### Projectile Delivery Methods (The Physics)

Every tower utilizes one of these aiming logics:

- **Axis:** Fires a projectile in a straight line (Cardinal directions only). Infinite range until impact.
- **Lob:** Arcs a projectile into the air.
	- **Mechanic:** Ignores ground obstacles/walls.
	- **Impact:** Lands in a “Donut” shape (Safe inner ring, damaging outer ring).
	- **Inaccuracy:** Has random deviation, encouraging use against groups (Swarms).
- **Salvo:** Artillery style.
	- **Input:** Player clicks a specific grid coordinate.
	- **Mechanic:** Charge-up animation $\rightarrow$ Projectile lands at target.
	- **Constraint:** Range is restricted to specific geometric patterns relative to the tower.
- **Jack:** Kinetic movement projectile.
	- **Mechanic:** The tower _is_ the projectile. It moves 1 tile per $N$ ticks.
	- **Physics:** Bounces off Walls and Map Borders.
	- **Effect:** Triggers an effect (Damage/Buff) in a 3x3 radius around itself every time it moves.
	- **Linking:** If two Jacks collide or pass adjacent, they “Connect” (chain lightning or laser fence effect).

#### Tower Classes

- **Swight:** Pure Damage output.
- **Charge:** Crowd Control (Knockback, Stun, Slow).
- **Engine:** Buffer (Increases Firerate/Damage of adjacent towers).
- **Drup:** Combo-enabler (Retriggers effects of other towers).

#### Tower Roster (Launch)

|**Name**|**Class**|**Delivery**|**Effect Description**|
|---|---|---|---|
|**Rifle**|Swight|Axis|High Dmg, Low ROF. Logic: Target **Strongest** enemy.|
|**Cluster**|Swight|Lob|Low Dmg, Low ROF. On impact, splits into 3 shrapnel pieces. Logic: Target **Weakest** enemy.|
|**Gravnet**|Charge|Axis/Salvo|High ROF, Low Dmg. **Pull:** Drags enemies toward impact center (Clumping).|
|**Grapeshot**|Charge|Axis/Salvo|Med ROF, High Dmg. **Push:** Blasts enemies away from impact center (Spacing).|
|**Echo**|Drup|**Jack**|**Trail Effect:** Leaves a holographic trail for 1s. Any ally tower touching the trail triggers its attack _immediately_.|

#### Merging Mechanic (Experimental)

- **Same Type Merge:** Combine 2 Rifle (Tier 1) $\rightarrow$ 1 Rifle (Tier 2). Stats summed.
- **Different Type Merge:** Combine Rifle + Cluster $\rightarrow$ Hybrid Tower (Uses max tier stats of both).

### 5. Enemy Bestiary

Enemies move strictly along X/Y axes (Manhattan distance pathfinding).

#### Classes:

### 6. Defensive Structures (Walls)

Walls are static blocks used to maze enemies.

- **Walnut:**
	- Size: 1x1 Tile.
	- Stats: High HP.
- **Pealet:**
	- Size: 1x3 Tile (Horizontal or Vertical).
	- Stats: Medium HP per tile. More cost-effective for blocking wide paths.

### 7. Meta-Game & Consumables

#### Lootboxes (Events)

- **Trigger:** Random drop during Haste phase or scripted level event.
- **Contents:**
	- **Coins:** Currency for the inter-level Shop.
	- **Usables:** Single-use active items.

#### Usables (Active Skills)

Player-triggered abilities to manipulate the field during emergencies.

1. **Conveyor Overdrive:** Doubles belt speed for 5 seconds.
2. **Emergency Repair:** Heals all buildings in a selected 5x5 area.
3. **Thumper:** Stuns all enemies on screen for 2 seconds.

### 8. Map & Environment

- **Terrain:** The grid is flat, but contains obstacles.
- **Chasms (Void Tiles):**
	- **Ground Enemies:** Cannot pass.
	- **Jack Towers:** Cannot pass (treat as wall/bounce).
	- **Lob Projectiles:** Can fly over.
	- **Air Enemies (if added):** Can fly over.

---

### 9. Technical Implementation Notes (CPU Rendering)

To adhere to the “Low memory/CPU” constraint:

1. **Sprite Batching:** Use a single texture atlas for all grid elements.
2. **Integer Math:** Avoid floating point physics where possible. Grid movement should be strictly coordinate-based (e.g., `Player.x += 1`).
3. **Object Pooling:** Pre-allocate pools for Projectiles and Enemies to avoid Garbage Collection spikes during “Haste” mode.
4. **Pathfinding:** Use Flow Field pathfinding (calculated once per tick for the whole map) rather than A* per enemy, as enemies share the same target (The Hall).
